<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>PX - FMA - Mapa Atribuição Falcons e Corujas</title>
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <dialog id="info-dialog">
        <section id="procedimento">
            <h2>Procedimento para abertura de casos</h2>
            
                <p>Identifique a qual Estado o contrato pertence.</p>
                <p>Pesquise pela sigla ou nome do estado. Exemplo: SP ou São Paulo.</p>
                <p>Realize a abertura do caso conforme as seguintes filas:</p>
            
            <div class="coord-card-container">
                <div class="coord-card peregrino-bg">
                    <h3>Peregrino - Motoristas<br> Leonardo Chaves <br> </h3>
                    <p>Falcon Peregrino - Motoristas</p>
                    <p>Coruja Peregrino - Motoristas</p>
                </div>
                <div class="coord-card lanario-bg">
                    <h3>Lanários - Ajudantes<br> José Alves <br> </h3>
                    <p>Falcon Lanários - Ajudantes</p>
                    <p>Coruja Lanários - Ajudantes</p>
                </div>
                <div class="coord-card sacre-bg">
                    <h3>Sacre - Motoristas<br> Alexandre Donegá <br> </h3>
                    <p>Falcon Sacre - Motoristas</p>
                    <p>Coruja Sacre - Motoristas</p>
                </div>
            </div>
        </section>
        <button id="close-dialog-btn">Entendido</button>
    </dialog>

    <dialog id="image-dialog">
        <div class="image-card-content">
            <img id="dialog-image" src="" alt="Imagem do Animal">
            <h4 id="dialog-title"></h4>
            <p id="dialog-text"></p>
        </div>
        <button id="close-image-btn">Fechar</button>
    </dialog>

    <header>
        <div class="container">
            <h1>PX FMA - Atribuição por Estado - Falcons e Corujas</h1>
        </div>
    </header>

    <div class="container">
        <main>
            <div class="main-content-wrapper">
                <div class="info-column">
                    <section class="section">
                        <h3>Divisão por Estado</h3>
                        <div style="margin-bottom:14px;">
                            <label for="filtro-estado" style="font-weight:bold;">Pesquisar estado:</label>
                            <div class="search-container">
                                <input type="text" id="filtro-estado" placeholder="Digite nome ou sigla...">
                                <button id="limpar-filtro-btn">✖</button>
                            </div>
                        </div>

                        <!-- team buttons moved to the map legend for a compact UI -->
                        <div class="table-container">
                            <div id="table-placeholder">
                                Selecione um estado no mapa ou use a pesquisa para ver as informações.
                            </div>
                            <div id="dynamic-info-card" style="display:none;">
                            </div>
                        </div>
                    </section>
                </div>
                
                <div class="map-column">
                    <section class="section">
                        <h3 style="text-align: center;">Mapa Interativo por Estado</h3>
                        <div id="svg-container"></div>
                        <div class="legend">
                            <button id="btn-peregrino" class="filter-btn legend-btn">Peregrino</button>
                            <button id="btn-lanario" class="filter-btn legend-btn">Lanários</button>
                            <button id="btn-sacre" class="filter-btn legend-btn">Sacre</button>
                        </div>
                    </section>
                </div>
            </div>
        </main>
        
        <div id="map-tooltip"></div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 - <span id="zepon-trigger" role="button" tabindex="0">Zepon Solutions</span>. Todos os direitos reservados.</p>
            <div id="zepon-details" class="hidden-content">
                <p>Obrigado por encontrar nosso easter egg! &#128521;</p>
                <img id="gato-trigger" src="img/gato.png" alt="Logotipo da Zepon Solutions" class="mini-image">
            </div>
        </div>
    </footer>
        <!-- Inline adjustment: calcula altura inicial do container com base em header/footer
                 para reduzir flash antes do script principal carregar. Será sobrescrito
                 pelo `js/script.js` posteriormente. -->
        <script>
            (function(){
                try {
                    var header = document.querySelector('header');
                    var footer = document.querySelector('footer');
                    var outer = document.querySelector('body > .container');
                    if (!outer) return;
                    var hh = header ? header.getBoundingClientRect().height : 0;
                    var fh = footer ? footer.getBoundingClientRect().height : 0;
                    var avail = Math.max(0, window.innerHeight - hh - fh);
                    outer.style.maxHeight = avail + 'px';
                    outer.style.overflowY = 'auto';
                } catch (e) { /* silent */ }
            })();
        </script>
        <script src="js/script.js"></script>
</body>
</html>
